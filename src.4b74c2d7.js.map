{"version":3,"sources":["js/services/apiTMDB.js","js/services/storage.js","js/services/pagination.js","js/services/modal.js","js/services/getGenresNames.js","js/services/index.js","js/genres.js","js/theme.js","js/templates/film_card.js","js/popular_movies.js","js/searchFilms.js","js/templates/film-modal.js","js/my_library.js","js/film-modal.js","js/up-btn.js","js/app.js","index.js"],"names":["ApiTMDB","endpoint","params","url","res","fetch","ok","json","Promise","reject","statusText","URLSearchParams","page","getData","TRENDING","query","SEARCH_MOVIES","append_to_response","GET_MOVIE","GENRES","then","genres","newPage","newQuery","id","newId","api_key","include_adult","Storage","constructor","key","data","window","localStorage","setItem","JSON","stringify","error","parse","getItem","removeItem","item","movies","updatedMovies","get","save","filter","movie","find","MOVIES","WATCHED","QUEUED","THEME","Pagination","totalPages","callback","e","target","dataset","btn","closest","PREV","goToPage","NEXT","PAGE","targetPage","getTargetPage","handleButtonsAndDots","createList","buttons","getButtonsRef","hideElement","showElement","refs","dots","at","prev","disabled","next","ref","classList","add","remove","pagination","index","findIndex","length","document","querySelectorAll","container","innerHTML","markup","firstPage","lastPage","i","createLinkMarkup","insertAdjacentHTML","num","querySelector","addEventListener","handlePaginationClick","textContent","newTotalPages","newCallback","Modal","name","openModal","closeBtn","closeModal","modal","onBackdropClick","onEscDown","body","removeEventListener","code","openBtn","openBtnSecond","onModalOpenBtnClick","getGenresNames","genresIds","genresStorage","genresNames","map","api","KEYS","moviesStorage","queuedStorage","watchedStorage","themeStorage","getGenres","console","root","button","light","dark","SCHEME","LIGHT","DARK","loadTheme","theme","setAttribute","getCurrentTheme","systemTheme","matchMedia","matches","savedTheme","handleClick","currentTheme","newTheme","getInitialTheme","handleTheme","movieListRef","makeMoviesMarkup","title","release_date","poster_path","genre_ids","vote_average","year","Date","getFullYear","poster2x","notFoundImgRetina","poster","notFoundImg","join","renderMarkup","popularMovies","gallery","loader","renderMovies","moreMovies","showPagination","log","results","total_pages","getTrending","scrollIntoView","search","submitForm","info","ERROR_MESSAGE","paginationCallback","searchMovies","handleSuccess","catch","handleError","err","hidePagination","searchFilms","preventDefault","elements","value","trim","reset","makeOneMovieMarkup","dataMovie","vote_count","original_title","overview","popularity","watched","queued","videos","genre","posterBig","notFoundImgBig","posterBig2x","notFoundImgBigRetina","trailer","video","type","trailerKey","MARKER","QUEUE","PER_PAGE","myLibBtn","myLibA","homeBtn","homeA","watchedBtn","queueBtn","libBtnsContainer","inputForm","header","onClickMyLibBtn","contains","changeClassA","changeClassBtn","renderWatched","addMarker","marker","removeMarker","renderLibrary","preparePage","renderQueue","queue","Math","ceil","skip","slice","onClickMyHomeBtn","onClickMyWatchedBtn","onClickMyQueueBtn","csassA","toggle","myLibrary","onModalCard","BTNS","TRAILER","ADD","REMOVE","SHOW","HIDE","backdropRef","modalRef","closeBtnRef","wrapperModalRef","trailerShown","clearModal","onModalOpenClick","event","cardRef","currentTarget","Number","checkMovie","getMovie","onModalButton","onBtnClick","deleteMovie","saveMovie","changeBtnTextWatched","changeBtnTextQueue","trailerRef","scrollTo","top","behavior","setTimeout","changeBtnTextTrailer","addUpBtn","footer","BTN","UP","DOWN","CLASS","observer","IntersectionObserver","handleObserve","threshold","createBtn","direction","createElement","href","sprite","renderBtns","upBtn","downBtn","appendChild","hideBtn","showBtn","entries","forEach","isIntersecting","observe","app"],"mappings":"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","file":"src.4b74c2d7.js","sourceRoot":"../src","sourcesContent":["/**\n * по умолчанию страница 1\n * есть геттер и сеттер для page\n * метод .incrementPage увеличивает страницу на 1\n * метод .resetPage устанавливет страницу в 1\n * запрос трендов - метод .getTrending()\n * поиск фильмов по query(строка) - метод .searchMovies()\n *  перед использовнием метода установить query на своем экземпляре класса\n * поиск фильма по id(число) - метод .getMovie()\n *  перед использовнием метода установить id на своем экземпляре класса\n */\nexport default class ApiTMDB {\n  static #API_KEY = 'fadfbb72581e18342bb7490adda20bdd';\n  static #BASE_URL = 'https://api.themoviedb.org/3';\n  static #ENDPOINTS = {\n    TRENDING: '/trending/movie/day',\n    SEARCH_MOVIES: '/search/movie',\n    GET_MOVIE: '/movie',\n    GENRES: '/genre/movie/list',\n  };\n  static #COMMON_PARAMS = new URLSearchParams({\n    api_key: ApiTMDB.#API_KEY,\n    include_adult: false,\n  });\n  #page = 1;\n  #query;\n  #id;\n\n  getData = async (endpoint, params = '') => {\n    const url = `${ApiTMDB.#BASE_URL}${endpoint}?${params}&${ApiTMDB.#COMMON_PARAMS}`;\n    const res = await fetch(url);\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res.statusText);\n  };\n\n  getTrending = () => {\n    const params = new URLSearchParams({\n      page: this.#page,\n    });\n    return this.getData(ApiTMDB.#ENDPOINTS.TRENDING, params);\n  };\n\n  searchMovies = () => {\n    const params = new URLSearchParams({\n      query: this.#query,\n      page: this.#page,\n    });\n    return this.getData(ApiTMDB.#ENDPOINTS.SEARCH_MOVIES, params);\n  };\n\n  getMovie = () => {\n    const params = new URLSearchParams({\n      append_to_response: 'videos',\n    });\n    const endpoint = `${ApiTMDB.#ENDPOINTS.GET_MOVIE}/${this.#id}`;\n    return this.getData(endpoint, params);\n  };\n\n  getGenres = () => {\n    const endpoint = `${ApiTMDB.#ENDPOINTS.GENRES}`;\n    return this.getData(endpoint).then(res => res.genres);\n  };\n\n  getGenres = () => {\n    const endpoint = `${ApiTMDB.#ENDPOINTS.GENRES}`;\n    return this.getData(endpoint).then(res => res.genres);\n  };\n\n  resetPage = () => {\n    this.#page = 1;\n  };\n  incrementPage = () => {\n    this.#page += 1;\n  };\n  get page() {\n    return this.#page;\n  }\n  set page(newPage) {\n    this.#page = newPage;\n  }\n  get query() {\n    return this.#query;\n  }\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n  get id() {\n    return this.#id;\n  }\n  set id(newId) {\n    this.#id = newId;\n  }\n}\n","/** Ожидает при создании экземпляра строку с ключом локального хранилища.\n ** В статическом свойстве Storage.KEYS хранятся возможные ключи.\n ** .save(data) - сохранить данные в хранилище\n ** .get() - считать данные из хранилища\n ** .remove() - удалить запись из хранилища\n ** .saveMovie(movie) - сохранить один фильм (добавить в масиив)\n ** .deleteMovie(id) - удалить один фильм, по id (удалить из массива)\n ** .checkMovie(id) - проверить, есть ли фильм в хранилище, по id\n */\nexport default class Storage {\n  static KEYS = {\n    MOVIES: 'filmoteka/movies',\n    WATCHED: 'filmoteka/watched',\n    QUEUED: 'filmoteka/queued',\n    GENRES: 'filmoteka/genres',\n    THEME: 'filmoteka/theme',\n  };\n  constructor(key) {\n    this.key = key;\n  }\n  save = data => {\n    try {\n      window.localStorage.setItem(this.key, JSON.stringify(data));\n    } catch (error) {\n      return null;\n    }\n  };\n  get = () => {\n    try {\n      return JSON.parse(window.localStorage.getItem(this.key));\n    } catch (error) {\n      return null;\n    }\n  };\n  remove = () => {\n    try {\n      return localStorage.removeItem(this.key);\n    } catch (error) {\n      return null;\n    }\n  };\n  saveMovie = item => {\n    const movies = this.get() || [];\n    const updatedMovies = [...movies, item];\n    this.save(updatedMovies);\n  };\n  deleteMovie = id => {\n    const movies = this.get();\n    const updatedMovies = movies?.filter(movie => movie.id !== id);\n    this.save(updatedMovies);\n  };\n  checkMovie = id => {\n    const movies = this.get();\n    const movie = movies?.find(movie => movie.id === id);\n    return !!movie;\n  };\n}\n","/**\n * Ожидает при вызове объект параметров:\n * 1. callback: callback-функция, которая будет вызвана при клике\n * на кнопку пагинации, в эту функцию будет передана новая страница.\n * 2. page: текущая страница, по умолчанию 1.\n * 3. totalPages: общее количество страниц, по умолчанию 1.\n * * Сеттеры и геттеры для pages и totalPages\n * * методы .hidePagination() и .showPagination()\n * * Пример создания экземпляра класса:\n * @example\n *  const pagination = new Pagination({\n *   page: 10,\n *   totalPages: 19,\n *   callback: page => {\n *     console.log(`Запрос на бекенд по странице № ${page} и рендер галлереи`);\n *   },\n * });\n */\nexport default class Pagination {\n  static #TYPES = {\n    PREV: 'prev',\n    NEXT: 'next',\n    PAGE: 'page',\n  };\n  #page;\n  #totalPages;\n  #callback;\n  #listFirstPage;\n  #listLastPage;\n  constructor({ page = 1, totalPages = 1, callback = () => {} }) {\n    this.refs = {\n      prev: document.querySelector('[data-btn=\"prev\"]'),\n      next: document.querySelector('[data-btn=\"next\"]'),\n      pagination: document.querySelector('.pagination'),\n      container: document.querySelector('.pagination__container'),\n      dots: document.querySelectorAll('.dots'),\n    };\n    this.refs.pagination.addEventListener('click', this.handlePaginationClick);\n    this.#totalPages = totalPages;\n    this.#callback = callback;\n    this.getButtonsRef()[1].textContent = totalPages;\n    this.goToPage(page);\n  }\n  handlePaginationClick = e => {\n    const target = e.target.dataset.btn ? e.target : e.target.closest('BUTTON');\n    const btn = target?.dataset.btn;\n    switch (btn) {\n      case Pagination.#TYPES.PREV:\n        if (this.#page === 1) return;\n        this.goToPage(this.#page - 1);\n        this.#callback(this.#page);\n        break;\n      case Pagination.#TYPES.NEXT:\n        if (this.#page === this.#totalPages) return;\n        this.goToPage(this.#page + 1);\n        this.#callback(this.#page);\n        break;\n      case Pagination.#TYPES.PAGE:\n        const targetPage = this.getTargetPage(e.target);\n        if (targetPage === this.#page) return;\n        this.goToPage(targetPage);\n        this.#callback(this.#page);\n        break;\n      default:\n        return;\n    }\n  };\n  goToPage = targetPage => {\n    if (targetPage > 1 && targetPage < this.#totalPages) {\n      this.#page = targetPage;\n    } else if (targetPage <= 1) {\n      this.#page = 1;\n    } else this.#page = this.#totalPages;\n    this.#listFirstPage = this.#page - 2 > 1 ? this.#page - 2 : 1;\n    this.#listLastPage = this.#page + 2 < this.#totalPages ? this.#page + 2 : this.#totalPages;\n    this.handleButtonsAndDots();\n    this.createList();\n  };\n  handleButtonsAndDots = () => {\n    const buttons = [...this.getButtonsRef()];\n\n    if (this.#listFirstPage <= 1) {\n      this.hideElement(buttons[0]);\n    } else {\n      this.showElement(buttons[0]);\n    }\n\n    if (this.#listFirstPage < 3) {\n      this.hideElement(this.refs.dots[0]);\n    } else {\n      this.showElement(this.refs.dots[0]);\n    }\n\n    if (this.#listLastPage >= this.#totalPages) {\n      this.hideElement(buttons.at(-1));\n    } else {\n      this.showElement(buttons.at(-1));\n    }\n\n    if (this.#listLastPage > this.#totalPages - 2) {\n      this.hideElement(this.refs.dots[1]);\n    } else {\n      this.showElement(this.refs.dots[1]);\n    }\n\n    if (this.#page === 1) {\n      this.refs.prev.disabled = true;\n    } else {\n      this.refs.prev.disabled = false;\n    }\n    if (this.#page === this.#totalPages) {\n      this.refs.next.disabled = true;\n    } else {\n      this.refs.next.disabled = false;\n    }\n  };\n  hideElement = ref => {\n    ref.classList.add('is-hidden');\n  };\n  showElement = ref => {\n    ref.classList.remove('is-hidden');\n  };\n  hidePagination = () => {\n    this.hideElement(this.refs.pagination);\n  };\n  showPagination = () => {\n    this.showElement(this.refs.pagination);\n  };\n  getTargetPage = target => {\n    const buttons = [...this.getButtonsRef()];\n    const index = buttons.findIndex(e => e === target);\n    if (index === 0) return 1;\n    if (index === buttons.length - 1) return this.#totalPages;\n    return index - 1 + this.#listFirstPage;\n  };\n  getButtonsRef = () => {\n    return document.querySelectorAll('[data-btn=\"page\"]');\n  };\n  createList = () => {\n    this.refs.container.innerHTML = '';\n    let markup = '';\n    let firstPage = this.#listFirstPage < 1 ? 1 : this.#listFirstPage;\n    let lastPage = this.#listLastPage > this.#totalPages ? this.#totalPages : this.#listLastPage;\n    for (let i = firstPage; i <= lastPage; i += 1) {\n      markup += this.createLinkMarkup(i);\n    }\n    this.refs.container.insertAdjacentHTML('beforeend', markup);\n  };\n  createLinkMarkup = num => {\n    const active = num === this.#page ? 'pagination__button--active' : '';\n    return `<span class=\"pagination__button ${active}\" data-btn=\"page\">${num}</span>`;\n  };\n  get page() {\n    return this.#page;\n  }\n  set page(newPage) {\n    this.#page = newPage;\n  }\n  get totalPages() {\n    return this.#totalPages;\n  }\n  set totalPages(newTotalPages) {\n    this.#totalPages = newTotalPages;\n    [...this.getButtonsRef()].at(-1).textContent = this.#totalPages;\n    this.goToPage(this.#page);\n  }\n  get callback() {\n    return this.#callback;\n  }\n  set callback(newCallback) {\n    this.#callback = newCallback;\n  }\n}\n","/**\n * Задать кнопке открытия модального окна аттрибут data-modal-open=\"[name]\"\n * * Задать второй кнопке открытия модального окна data-modal-open=\"[name]-second\"\n * * Задать backdrop модального окна аттрибуты data-modal=\"[name]\", class=\"is-hidden\"\n * * Задать кнопке закрытия модального окна аттрибут data-modal-close=\"[name]\"\n * * Модальное окно закрывается по клику на кнопку закрытия, по клику в бэкдроп,\n * по нажатию клавиши \"Esc\"\n */\nclass Modal {\n  constructor(name) {\n    this.refs = {\n      modal: document.querySelector(`[data-modal=\"${name}\"]`),\n      openBtn: document.querySelector(`[data-modal-open=\"${name}\"]`),\n      openBtnSecond: document.querySelector(`[data-modal-open=\"${name}-second\"]`),\n      closeBtn: document.querySelector(`[data-modal-close=\"${name}\"]`),\n    };\n    this.refs.openBtn.addEventListener('click', this.onModalOpenBtnClick);\n    this.refs.openBtnSecond?.addEventListener('click', this.onModalOpenBtnClick);\n  }\n  onModalOpenBtnClick = () => {\n    this.openModal();\n    this.refs.closeBtn.addEventListener('click', this.closeModal);\n    this.refs.modal.addEventListener('click', this.onBackdropClick);\n    document.addEventListener('keydown', this.onEscDown);\n  };\n  openModal = () => {\n    this.refs.modal.classList.remove('is-hidden');\n    document.body.classList.add('modal-open');\n  };\n  closeModal = () => {\n    this.refs.modal.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n    this.refs.closeBtn.removeEventListener('click', this.closeModal);\n    this.refs.modal.removeEventListener('click', this.onBackdropClick);\n    document.removeEventListener('keydown', this.onEscDown);\n  };\n  onBackdropClick = e => {\n    if (e.target !== this.refs.modal) return;\n    this.closeModal();\n  };\n  onEscDown = e => {\n    if (e.code !== 'Escape') return;\n    this.closeModal();\n  };\n}\nexport { Modal };\n","import { genresStorage } from '../services';\n\nfunction getGenresNames(genresIds) {\n  const genres = genresStorage.get();\n  const genresNames = genresIds.map(id => {\n    const { name } = genres.find(item => item.id === id);\n    return name;\n  });\n  return genresNames;\n}\nexport { getGenresNames };\n","import ApiTMDB from './apiTMDB';\nimport Storage from './storage';\nimport Pagination from './pagination';\n\nconst api = new ApiTMDB();\nconst genresStorage = new Storage(Storage.KEYS.GENRES);\nconst moviesStorage = new Storage(Storage.KEYS.MOVIES);\nconst queuedStorage = new Storage(Storage.KEYS.QUEUED);\nconst watchedStorage = new Storage(Storage.KEYS.WATCHED);\nconst themeStorage = new Storage(Storage.KEYS.THEME);\nconst pagination = new Pagination({});\n\nexport { Modal } from './modal';\nexport { getGenresNames } from './getGenresNames';\nexport {\n  api,\n  genresStorage,\n  moviesStorage,\n  queuedStorage,\n  watchedStorage,\n  themeStorage,\n  pagination,\n};\n","import { api, genresStorage } from './services';\nasync function genres() {\n  try {\n    const genres = await api.getGenres();\n    genresStorage.save(genres);\n  } catch (error) {\n    console.error(error);\n  }\n}\nexport default genres;\n","import { themeStorage } from './services';\nconst refs = {\n  root: document.querySelector(':root'),\n  button: document.querySelector('.theme'),\n  light: document.querySelector('[data-theme=\"light\"]'),\n  dark: document.querySelector('[data-theme=\"dark\"]'),\n};\nconst THEME = {\n  SCHEME: 'color-scheme',\n  LIGHT: 'light',\n  DARK: 'dark',\n};\n\nfunction loadTheme(theme) {\n  if (theme === THEME.LIGHT) {\n    refs.light.classList.add('active');\n    refs.dark.classList.remove('active');\n  } else {\n    refs.dark.classList.add('active');\n    refs.light.classList.remove('active');\n  }\n  refs.root.setAttribute(THEME.SCHEME, theme);\n}\n\nfunction getCurrentTheme() {\n  const systemTheme = window.matchMedia(`(prefers-${THEME.SCHEME}: ${THEME.LIGHT})`).matches\n    ? THEME.LIGHT\n    : THEME.DARK;\n  const savedTheme = themeStorage.get();\n  return savedTheme ? savedTheme : systemTheme;\n}\n\nfunction handleClick() {\n  const currentTheme = getCurrentTheme();\n  const newTheme = currentTheme === THEME.LIGHT ? THEME.DARK : THEME.LIGHT;\n  themeStorage.save(newTheme);\n  loadTheme(newTheme);\n}\n\nfunction getInitialTheme() {\n  const theme = getCurrentTheme();\n  loadTheme(theme);\n}\n\nexport default function handleTheme() {\n  refs.button.addEventListener('click', handleClick);\n  // window.addEventListener('load', getInitialTheme);\n  getInitialTheme();\n}\n","import { getGenresNames } from '../services';\nimport notFoundImg from '../../images/film_card/poster-img.jpg';\nimport notFoundImgRetina from '../../images/film_card/poster-img@2x.jpg';\nconst movieListRef = document.querySelector('.gallery');\n\nconst makeMoviesMarkup = movies =>\n  movies\n    .map(({ title, release_date, poster_path, id, genre_ids: genresIds, genres, vote_average }) => {\n      const genresNames = genresIds ? getGenresNames(genresIds) : genres.map(({ name }) => name);\n      const year = new Date(release_date).getFullYear();\n      const poster2x = poster_path\n        ? `https://image.tmdb.org/t/p/w500${poster_path}`\n        : notFoundImgRetina;\n      const poster = poster_path ? `https://image.tmdb.org/t/p/w300${poster_path}` : notFoundImg;\n      return `\n      <li class=\"card-item\" data-id=\"${id}\">\n        <picture>\n          <source\n          srcset=\"\n          ${poster} 1x,\n          ${poster2x} 2x,\n          \" \n        />\n        <img class=\"movie-img\"\n        src=\"${poster}\"\n        alt=\"${title}\"\n        width=\"280\"\n        height=\"398\"\n        />\n        </picture>\n        <div class = \"movie-card\">\n        <h5 class=\"movie-title\">${title}</h5>\n        <div class=\"container_movie-info\">\n        <p class=\"movie-info\">${genresNames.join(', ')} | ${year}</p>\n        <p class=\"movie-rating\">${vote_average ? vote_average : 'N/A'}</p>\n        </div>\n        </div>\n        </li>\n        `;\n    })\n    .join('');\n\nconst renderMarkup = movies => {\n  const markup = makeMoviesMarkup(movies);\n  movieListRef.insertAdjacentHTML('beforeend', markup);\n};\n\nexport { renderMarkup };\n","import { renderMarkup } from './templates/film_card';\nimport { api, pagination } from './services';\n\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n};\n\nasync function popularMovies() {\n  try {\n    const totalPages = await renderMovies();\n    pagination.page = api.page;\n    pagination.totalPages = totalPages;\n    pagination.callback = moreMovies;\n    pagination.showPagination();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function renderMovies() {\n  refs.loader.classList.remove('is-hidden');\n  const { results, total_pages: totalPages } = await api.getTrending();\n  refs.gallery.innerHTML = ' ';\n  renderMarkup(results);\n  refs.loader.classList.add('is-hidden');\n  return totalPages;\n}\n\nasync function moreMovies() {\n  try {\n    api.page = pagination.page;\n    await renderMovies();\n    refs.gallery.scrollIntoView();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default popularMovies;\n","import { renderMarkup } from './templates/film_card';\nimport { api, pagination, moviesStorage } from './services';\n\nconst submitForm = document.querySelector('.header-form');\nconst info = document.querySelector('.gallery-info');\nconst gallery = document.querySelector('.gallery');\nconst ERROR_MESSAGE = 'Search is not successful. Enter the correct movie name.';\n\nconst paginationCallback = page => {\n  api.page = page;\n  api.searchMovies().then(handleSuccess).catch(handleError);\n};\n\nconst handleSuccess = ({ results, total_pages: totalPages }) => {\n  info.innerHTML = '';\n  gallery.innerHTML = '';\n  renderMarkup(results);\n  moviesStorage.save(results);\n  pagination.callback = paginationCallback;\n  pagination.page = api.page;\n  pagination.totalPages = totalPages;\n};\nconst handleError = err => {\n  gallery.innerHTML = '';\n  pagination.hidePagination();\n  if (err) {\n    console.error(err);\n    return;\n  }\n  info.innerHTML = ERROR_MESSAGE;\n};\nconst searchFilms = async e => {\n  e.preventDefault();\n  const query = e.target.elements.search.value.trim();\n  if (!query) {\n    return;\n  }\n  api.page = 1;\n  api.query = query;\n  try {\n    const data = await api.searchMovies();\n    if (!data.results.length) {\n      handleError();\n      return;\n    }\n    handleSuccess(data);\n    pagination.showPagination();\n    e.target.reset();\n  } catch (error) {\n    handleError(error);\n  }\n};\nconst search = () => {\n  submitForm.addEventListener('submit', searchFilms);\n};\nexport default search;\n","// Функция создающая разметку для одного фильма\nimport notFoundImg from '../../images/film_card/poster-img.jpg';\nimport notFoundImgBig from '../../images/film_card/poster-big.jpg';\nimport notFoundImgRetina from '../../images/film_card/poster-big@2x.jpg';\nimport notFoundImgBigRetina from '../../images/film_card/poster-img@2x.jpg';\n\nexport default function makeOneMovieMarkup(dataMovie) {\n  const {\n    title,\n    poster_path,\n    genres,\n    vote_average,\n    vote_count,\n    original_title,\n    overview,\n    popularity,\n    watched,\n    queued,\n    videos,\n  } = dataMovie;\n  const genresNames = genres.map(genre => genre.name).join(', ');\n  const poster = poster_path ? `https://image.tmdb.org/t/p/w342${poster_path}` : notFoundImg;\n  const poster2x = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : notFoundImgRetina;\n  const posterBig = poster_path ? `https://image.tmdb.org/t/p/w500${poster_path}` : notFoundImgBig;\n  const posterBig2x = poster_path\n    ? `https://image.tmdb.org/t/p/w780${poster_path}`\n    : notFoundImgBigRetina;\n  let trailer = videos.results.find(\n    video => video['iso_639_1'] === 'en' && video.type === 'Trailer',\n  );\n  trailer = trailer ? trailer : videos.results[0];\n  const trailerKey = trailer?.key;\n  return `<div class=\"modal__content\">\n        <div class=\"poster__wrapper\">\n            <picture>\n                <source\n                  srcset=\"\n                    ${poster} 1x,\n                    ${poster2x} 2x\n                  \"\n                  media=\"(max-width:1023px)\"\n                />\n                <source\n                  srcset=\"\n                    ${posterBig} 1x,\n                    ${posterBig2x} 2x\n                  \"\n                  media=\"(min-width:1024px)\"\n                />\n                <img class=\"poster__img\" alt=\"${title}\" src=\"${poster}\" loading=\"lazy\" />\n              </picture>\n        </div>\n        <div class=\"movie\">\n            <h2 class=\"movie__title uppercase\">${title}</h2>\n            <div class=\"movie__statistic\">\n                <ul class=\"movie__list--left\">\n                    <li class=\"movie__item--left\">Vote &#47 Votes\n                    </li>\n                    <li class=\"movie__item--left\">Popularity\n                    </li>\n                    <li class=\"movie__item--left\">Original Title\n                    </li>\n                    <li class=\"movie__item--left\">Genre\n                    </li>\n                </ul>\n                <ul class=\"movie__list--right\">\n                    <li class=\"movie__item--right\">\n                        <span class=\"movie__average\">${vote_average}</span>\n                        <span>&#47</span>\n                        <span class=\"movie__count\">${vote_count}</span>\n                    </li>\n                    <li class=\"movie__item--right\">${popularity}\n                    </li>\n                    <li class=\"movie__item--right uppercase\">${original_title}\n                    </li>\n                    <li class=\"movie__item--right\">${genresNames}\n                    </li>\n                </ul>\n            </div>\n            <div class=\"movie__description\">\n                <h3 class=\"movie__about uppercase\">About</h3>\n                <p class=\"movie__text\">${overview}</p>\n            </div>\n            <div class=\"movie__btn buttons__container\">\n                    <button type=\"button\" class=\"btn--modal btn--on\" data-btn=\"watched\">${\n                      watched ? 'Remove from' : 'Add to'\n                    } watched</button>\n                    <button type=\"button\" class=\"btn--modal btn--on\" data-btn=\"queue\">${\n                      queued ? 'Remove from' : 'Add to'\n                    } queue</button>\n                    ${\n                      trailerKey\n                        ? `<button type=\"button\" class=\"btn--modal btn--on\" data-btn=\"trailer\">Show trailer</button>`\n                        : ''\n                    }\n            </div>\n        </div>\n    </div>\n    ${\n      trailerKey\n        ? `<div class=\"trailer is-hidden\">\n      <iframe\n      class=\"trailer__iframe\"\n      width=\"240\"\n      height=\"135\"\n      src=\"https://www.youtube.com/embed/${trailerKey}\"\n      title=\"${trailer.type}\"\n      frameborder=\"0\"\n      allow=\"accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope; picture-in-picture\"\n      allowfullscreen>\n      </iframe>\n    </div>`\n        : '<div></div>'\n    }\n    `;\n}\n","import { watchedStorage, queuedStorage, pagination } from './services';\nimport { renderMarkup } from './templates/film_card';\nimport popularMovies from './popular_movies';\n\nconst MARKER = {\n  WATCHED: 'watched',\n  QUEUE: 'queue',\n};\nconst PER_PAGE = 18;\nlet page = 1;\nconst refs = {\n  myLibBtn: document.querySelector('[data-btn=\"myLibrary\"]'),\n  myLibA: document.querySelector('[data-a=\"myLibrary\"]'),\n  homeBtn: document.querySelector('[data-btn=\"home\"]'),\n  homeA: document.querySelector('[data-a=\"home\"]'),\n  watchedBtn: document.querySelector('[data-btn=\"watched\"]'),\n  queueBtn: document.querySelector('[data-btn=\"queue\"]'),\n  libBtnsContainer: document.querySelector('.buttons__container--header'),\n  inputForm: document.querySelector('.header-form'),\n  info: document.querySelector('.gallery-info'),\n  gallery: document.querySelector('.gallery'),\n  header: document.querySelector('.header'),\n};\n\nfunction onClickMyLibBtn() {\n  if (refs.myLibA.classList.contains('current')) {\n    return;\n  }\n  changeClassA('current');\n  changeClassBtn('btn--on', 'btn--off');\n  refs.libBtnsContainer.classList.remove('is-hidden');\n  refs.inputForm.classList.add('is-hidden');\n  refs.header.classList.add('myLib');\n  page = 1;\n  renderWatched();\n}\n\nfunction addMarker(marker) {\n  refs.gallery.classList.add(marker);\n}\nfunction removeMarker(marker) {\n  refs.gallery.classList.remove(marker);\n}\n\nfunction renderWatched(newPage) {\n  refs.gallery.innerHTML = '';\n  const watched = watchedStorage.get() || [];\n  removeMarker(MARKER.QUEUE);\n  addMarker(MARKER.WATCHED);\n  pagination.callback = renderWatched;\n  const watchedPage = preparePage(watched, newPage);\n  renderLibrary(watchedPage);\n}\n\nfunction renderQueue(newPage) {\n  refs.gallery.innerHTML = '';\n  const queue = queuedStorage.get() || [];\n  removeMarker(MARKER.WATCHED);\n  addMarker(MARKER.QUEUE);\n  pagination.callback = renderQueue;\n  const queuePage = preparePage(queue, newPage);\n  renderLibrary(queuePage);\n}\n\nfunction preparePage(data, newPage) {\n  page = newPage ? newPage : page;\n  const totalPages = Math.ceil(data.length / PER_PAGE);\n  page = page > totalPages ? totalPages : page;\n  pagination.page = page;\n  pagination.totalPages = totalPages;\n  const skip = (page - 1) * PER_PAGE;\n  return data.slice(skip, PER_PAGE * page);\n}\n\nfunction renderLibrary(movies) {\n  if (!movies || movies.length === 0) {\n    refs.info.innerHTML = 'Please add something to library';\n    pagination.hidePagination();\n    return;\n  }\n  refs.info.innerHTML = '';\n  renderMarkup(movies);\n}\n\nfunction onClickMyHomeBtn() {\n  if (refs.homeA.classList.contains('current')) {\n    return;\n  }\n  removeMarker(MARKER.WATCHED);\n  removeMarker(MARKER.QUEUE);\n  changeClassA('current');\n  refs.libBtnsContainer.classList.add('is-hidden');\n  refs.inputForm.classList.remove('is-hidden');\n  refs.header.classList.remove('myLib');\n  refs.info.innerHTML = '';\n  popularMovies();\n}\n\nfunction onClickMyWatchedBtn() {\n  changeClassBtn('btn--on', 'btn--off');\n  page = 1;\n  renderWatched();\n}\n\nfunction onClickMyQueueBtn() {\n  changeClassBtn('btn--off', 'btn--on');\n  page = 1;\n  renderQueue();\n}\n\nfunction changeClassBtn(add, remove) {\n  refs.watchedBtn.classList.add(add);\n  refs.watchedBtn.classList.remove(remove);\n  refs.queueBtn.classList.add(remove);\n  refs.queueBtn.classList.remove(add);\n}\n\nfunction changeClassA(csassA) {\n  refs.myLibA.classList.toggle(csassA);\n  refs.homeA.classList.toggle(csassA);\n}\n\nfunction myLibrary() {\n  refs.myLibBtn.addEventListener('click', onClickMyLibBtn);\n  refs.homeBtn.addEventListener('click', onClickMyHomeBtn);\n  refs.watchedBtn.addEventListener('click', onClickMyWatchedBtn);\n  refs.queueBtn.addEventListener('click', onClickMyQueueBtn);\n}\n\nexport { MARKER, myLibrary, renderWatched, renderQueue };\n","import { api, watchedStorage, queuedStorage } from './services';\nimport makeOneMovieMarkup from './templates/film-modal';\nimport { MARKER, renderWatched, renderQueue } from './my_library';\n\nconst BTNS = {\n  QUEUE: 'queue',\n  WATCHED: 'watched',\n  TRAILER: 'trailer',\n  ADD: 'Add to',\n  REMOVE: 'Remove from',\n  SHOW: 'Show',\n  HIDE: 'Hide',\n};\n// получаем ссылку на бэкдроп\nconst backdropRef = document.querySelector(`[data-modal=\"movie-one\"]`);\n// получаем ссылку на модалку\nconst modalRef = document.querySelector(`.modal`);\n// получаем ссылку на галерею в которую рендерятся карточки фильмов\nconst movieListRef = document.querySelector('.gallery');\n// получаем ссылку на кнопку закрытия модалки\nconst closeBtnRef = document.querySelector(`[data-modal-close=\"movie-one\"]`);\nconst wrapperModalRef = document.querySelector('.wrapper-modal');\n\nlet dataMovie = {};\nlet watched = false;\nlet queued = false;\nlet trailerShown = false;\n\n// Функция для тестировки запроса по получению 20 фильмов\n// async function fetchMovies() {\n//   try {\n//     const data = await api.getTrending();\n//     const { results } = data;\n//     renderMarkup(results);\n//   } catch (error) {\n//     console.log(error);\n//     handleError();\n//   }\n// }\n\n// Функция для очищения разметки в модальном окне\nfunction clearModal() {\n  wrapperModalRef.innerHTML = '';\n}\n\n// Функция для сообщения пользователю об ошибке\nconst handleError = () => {\n  console.log(1111);\n};\n\n// Функция для модального окна\nasync function onModalOpenClick(event) {\n  const cardRef = event.target.closest('.card-item');\n  if (event.target === event.currentTarget || !cardRef) {\n    return;\n  }\n  const id = Number(cardRef.dataset.id);\n  watched = watchedStorage.checkMovie(id);\n  queued = queuedStorage.checkMovie(id);\n\n  api.id = id;\n  dataMovie = await api.getMovie();\n\n  wrapperModalRef.insertAdjacentHTML(\n    'beforeend',\n    makeOneMovieMarkup({ ...dataMovie, watched, queued }),\n  );\n\n  openModal();\n\n  closeBtnRef.addEventListener('click', closeModal);\n  backdropRef.addEventListener('click', onBackdropClick);\n  document.addEventListener('keydown', onEscDown);\n  wrapperModalRef.querySelector('.buttons__container').addEventListener('click', onModalButton);\n}\n\nfunction openModal() {\n  backdropRef.classList.remove('is-hidden');\n  document.body.classList.add('modal-open');\n}\n\nfunction closeModal() {\n  backdropRef.classList.add('is-hidden');\n  document.body.classList.remove('modal-open');\n  closeBtnRef.removeEventListener('click', onBtnClick);\n  backdropRef.removeEventListener('click', onBackdropClick);\n  document.removeEventListener('keydown', onEscDown);\n  wrapperModalRef.querySelector('.buttons__container').removeEventListener('click', onModalButton);\n  clearModal();\n}\nfunction onBackdropClick(e) {\n  if (e.target !== backdropRef) return;\n  closeModal();\n}\nfunction onEscDown(e) {\n  if (e.code !== 'Escape') return;\n  closeModal();\n}\nfunction onBtnClick(e) {\n  if (e.code !== closeBtnRef) return;\n  closeModal();\n}\nfunction onModalButton({ target }) {\n  const btn = target.dataset.btn;\n  if (!btn) return;\n  switch (btn) {\n    case BTNS.WATCHED:\n      if (watched) {\n        watchedStorage.deleteMovie(dataMovie.id);\n      } else {\n        watchedStorage.saveMovie(dataMovie);\n      }\n      watched = !watched;\n      changeBtnTextWatched(target);\n      if (movieListRef.classList.contains(MARKER.WATCHED)) {\n        renderWatched();\n      }\n      return;\n    case BTNS.QUEUE:\n      if (queued) {\n        queuedStorage.deleteMovie(dataMovie.id);\n      } else {\n        queuedStorage.saveMovie(dataMovie);\n      }\n      queued = !queued;\n      changeBtnTextQueue(target);\n      if (movieListRef.classList.contains(MARKER.QUEUE)) {\n        renderQueue();\n      }\n      return;\n    case BTNS.TRAILER:\n      const trailerRef = document.querySelector('.trailer');\n      if (trailerShown) {\n        modalRef.scrollTo({\n          top: 0,\n          behavior: 'smooth',\n        });\n        setTimeout(() => trailerRef.classList.add('is-hidden'), 250);\n      } else {\n        trailerRef.classList.remove('is-hidden');\n        setTimeout(\n          () =>\n            modalRef.scrollTo({\n              top: 500,\n              behavior: 'smooth',\n            }),\n          250,\n        );\n      }\n      trailerShown = !trailerShown;\n      changeBtnTextTrailer(target);\n      return;\n    default:\n      return;\n  }\n}\n\nfunction changeBtnTextWatched(btn) {\n  btn.textContent = `${watched ? BTNS.REMOVE : BTNS.ADD} ${BTNS.WATCHED}`;\n}\n\nfunction changeBtnTextQueue(btn) {\n  btn.textContent = `${queued ? BTNS.REMOVE : BTNS.ADD} ${BTNS.QUEUE}`;\n}\n\nfunction changeBtnTextTrailer(btn) {\n  btn.textContent = `${trailerShown ? BTNS.HIDE : BTNS.SHOW} ${BTNS.TRAILER}`;\n}\n\nfunction onModalCard() {\n  //  временный вызов функции для получения 20 карточек и их рендера\n  //   fetchMovies();\n  // вешаем слушателя на общего родителя галерею\n  movieListRef.addEventListener('click', onModalOpenClick);\n}\nexport default onModalCard;\n","import sprite from '../images/sprite.svg';\n\nconst refs = {\n  header: document.querySelector('#header'),\n  footer: document.querySelector('#footer'),\n};\n\nconst BTN = {\n  UP: 'up',\n  DOWN: 'down',\n  CLASS: 'btn-up',\n};\n\nconst observer = new IntersectionObserver(handleObserve, { threshold: 0 });\n\nfunction createBtn(direction) {\n  const btn = document.createElement('a');\n  const href = direction === BTN.UP ? '#header' : '#footer';\n  btn.setAttribute('href', href);\n  btn.setAttribute('aria-label', `Scroll page ${direction}`);\n  btn.classList.add(`${BTN.CLASS}__btn`, 'is-hidden');\n  btn.innerHTML = `\n    <svg class=\"${BTN.CLASS}__svg\" width=\"32\" height=\"32\">\n      <use href=\"${sprite}#icon-circle-${direction}\"></use>\n    </svg>\n  `;\n  return btn;\n}\n\nfunction renderBtns() {\n  refs.upBtn = createBtn(BTN.UP);\n  refs.downBtn = createBtn(BTN.DOWN);\n  const container = document.createElement('div');\n  container.classList.add(BTN.CLASS);\n  container.appendChild(refs.upBtn);\n  container.appendChild(refs.downBtn);\n  document.querySelector('main').appendChild(container);\n}\n\nfunction hideBtn(target) {\n  if (target === refs.header) {\n    refs.upBtn.classList.add('is-hidden');\n  } else {\n    refs.downBtn.classList.add('is-hidden');\n  }\n}\nfunction showBtn(target) {\n  if (target === refs.header) {\n    refs.upBtn.classList.remove('is-hidden');\n  } else {\n    refs.downBtn.classList.remove('is-hidden');\n  }\n}\n\nfunction handleObserve(entries) {\n  entries.forEach(({ isIntersecting, target }) => {\n    if (isIntersecting) {\n      hideBtn(target);\n    } else {\n      showBtn(target);\n    }\n  });\n}\n\nfunction addUpBtn() {\n  renderBtns();\n  observer.observe(refs.header);\n  observer.observe(refs.footer);\n}\n\nexport default addUpBtn;\n","import genres from './genres';\nimport handleTheme from './theme';\nimport popularMovies from './popular_movies';\nimport search from './searchFilms';\nimport filmModal from './film-modal';\nimport { myLibrary } from './my_library';\nimport addUpBtn from './up-btn';\nimport { Modal } from './services/modal';\n\nexport default async function app() {\n  await genres();\n  handleTheme();\n  popularMovies();\n  search();\n  filmModal();\n  myLibrary();\n  addUpBtn();\n  const teamModal = new Modal('team');\n}\n","import './sass/main.scss';\nimport app from './js/app';\napp();\n"]}